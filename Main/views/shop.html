<div class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <!-- ASIDE -->
            <div id="aside" class="col-md-3">
                <!-- Category -->
                <div class="aside">
                    <h3 class="aside-title">Categories</h3>
                    <div class="checkbox-filter">

                        <div class="input-checkbox" ng-repeat="cat in categoryList">
                            <input type="checkbox" ng-model="cat.selected" id="cat-{{cat.category_id}}"
                                ng-change="updateFilters()">
                            <label for="cat-{{cat.category_id}}">
                                <span></span>
                                {{cat.name}}
                            </label>
                        </div>

                    </div>
                </div>
                <!-- -->


                <!-- Brand -->
                <div class="aside">
                    <h3 class="aside-title">Brand</h3>
                    <div class="checkbox-filter" ng-repeat="brand in brandList">
                        <div class="input-checkbox">
                            <input type="checkbox" id="brand-{{brand.brand_id}}" ng-model="brand.selected"
                                ng-change="updateFilters()">
                            <label for="brand-{{brand.brand_id}}">
                                <span></span>
                                {{brand.name}}
                            </label>
                        </div>
                    </div>
                </div>

            </div>
            <!-- /ASIDE -->

            <!-- STORE -->
            <div id="store" class="col-md-9">
                <!-- store products -->
                <div class="col-5 pb-1">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <!-- Search -->
                        <form ng-submit="searchProducts()" class="w-100">
                            <div class="position-relative">
                                <input type="text" class="form-control pr-5" placeholder="Search by name"
                                    ng-model="searchText" ng-change="updateFilters()">

                                <!-- Clear button (X) -->
                                <button type="button" class="btn-clear" ng-if="searchText && searchText.length"
                                    ng-click="clearSearch()">
                                    &times;
                                </button>
                            </div>
                        </form>
                    </div>
                </div>


                <div class="row">
                    <!-- product -->
                    <div class="col-md-4 col-xs-6" ng-repeat="product in Products">
                        <div class="product" ng-if="product">
                            <div class="product-img">
                                <img class="img-fluid w-100" ng-if="product.image_location"
                                    ng-src="../BackOffice/uploads/{{product.image_location}}" alt="{{ product.name }}">
                                <img class="img-fluid w-100" ng-if="!product.image_location"
                                    ng-src="assets/img/default.jpg" alt="No image available">

                                <div class="product-label">
                                    <span class="sale">-30%</span>
                                    <span class="new">NEW</span>
                                </div>
                            </div>
                            <div class="product-body">
                                <h5 class="product-name">
                                    <a href="#">{{ product.name | limitTo:20 }}</a>
                                </h5>
                                <h6 class="product-price" ng-if="product.price">
                                    â‚±{{ product.price | number:2 }}
                                    <del class="product-old-price">â‚±{{ product.price | number:2 }}</del>
                                </h6>
                                <h6 class="product-price" ng-if="!product.price">
                                    â‚±0.00
                                </h6>

                                <!-- ðŸ§¾ Stock Display -->
                                <div class="text-muted small">
                                    <i class="fa fa-box"></i>
                                    <span ng-if="product.stock > 5">
                                        {{product.stock}} in stock
                                    </span>
                                    <span class="text-warning" ng-if="product.stock > 0 && product.stock <= 5">
                                        Only {{product.stock}} left!
                                    </span>
                                    <span class="text-danger" ng-if="product.stock == 0">
                                        Out of stock
                                    </span>
                                </div>
                            </div>
                            <div class="add-to-cart">
                                <button ng-click="decreaseQty(product)">
                                    <i class="fa fa-minus"></i>
                                </button>

                                <input ng-model="product.Qty" class="form-check-input"
                                    style="margin-bottom: 5px;width: 40px;">

                                <button ng-click="increaseQty(product)">
                                    <i class="fa fa-plus"></i>
                                </button>

                                <button class="add-to-cart-btn" ng-click="addToCart(product.product_id, product.Qty)"
                                    data-toggle="modal" data-target="#addToCartModal">
                                    <i class="fa fa-shopping-cart"></i> add to cart
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- /product -->
                </div>
                <!-- /store products -->

                <!-- store bottom filter -->
                <div class="store-filter clearfix">
                    <nav aria-label="Page navigation" class="">
                        <ul class="store-pagination">
                            <!-- Previous -->
                            <li class="page-item" ng-class="{disabled: pagination.page === 1}">
                                <a class="page-link" href="" ng-click="goToPage(pagination.page - 1)">
                                    &laquo;
                                </a>
                            </li>

                            <li class="page-item" ng-repeat="n in getPageRange(pagination.pages) track by $index"
                                ng-class="{active: ($index+1) === pagination.page}">
                                <a class="page-link" href="javascript:void(0)" ng-click="goToPage($index+1)">
                                    {{$index+1}}
                                </a>
                            </li>

                            <!-- Next -->
                            <li class="page-item" ng-class="{disabled: pagination.page === pagination.pages}">
                                <a class="page-link" href="" ng-click="goToPage(pagination.page + 1)">
                                    &raquo;
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
                <!-- /store bottom filter -->
            </div>

            <!-- âœ… AngularJS-Controlled Bootstrap Modal -->
            <div class="modal fade" id="addToCartModal" tabindex="-1" aria-labelledby="addToCartModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-sm modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="addToCartModalLabel">Cart Notification</h5>
                        </div>
                        <div class="modal-body">
                            {{ alertMessage }}
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">OK</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- /STORE -->
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>