<div class="container mt-5">
    <h2 class="mb-4">Pending Orders</h2>

    <!-- Parent and Child Table -->
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Order No</th>
                <th>Order By</th>
                <th>Status</th>
                <th>Order Created At</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="order in OrdersWithItems | filter:{order_status_name: 'Pending'}">
                <td>{{ order.order_id }}</td>
                <td>{{ order.order_by_name }}</td>
                <td>{{ order.order_status_name }}</td>
                <td>{{ order.order_created_at }}</td>                
                <td>
                    <!-- Toggle Button for Child Items -->
                    <button class="btn btn-secondary mb-2" ng-click="showOrderItems(order)">
                      Show Items
                    </button>
                </td>
                <td>
                    <!-- Toggle Button for Child Items -->
                    <button class="btn btn-secondary mb-2" ng-click="shippedOrder(order.order_id)">
                      Ready for Shipping
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="container mt-5">
    <h2 class="mb-4">Shipped Orders</h2>

    <!-- Parent and Child Table -->
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Order No</th>
                <th>Order By</th>
                <th>Status</th>
                <th>Order Created At</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="order in OrdersWithItems | filter:{order_status_name: 'Shipped'}">
                <td>{{ order.order_id }}</td>
                <td>{{ order.order_by_name }}</td>
                <td>{{ order.order_status_name }}</td>
                <td>{{ order.order_created_at }}</td>                
                <td>
                    <!-- Toggle Button for Child Items -->
                    <button class="btn btn-secondary mb-2" ng-click="showOrderItems(order)">
                      Show Items
                    </button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Bootstrap Modal for showing child items -->
<div class="modal fade" id="childModal" tabindex="-1" aria-labelledby="childModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" style="max-width: 75%;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="childModalLabel">Order Items</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Table wrapped in a div with `table-responsive` class -->
                <div class="table-responsive">
                    <table class="table table-sm table-bordered">
                        <thead>
                            <tr>
                              <th>Child Item ID</th>
                              <th>Brand Name</th>
                              <th>Category Name</th>
                              <th>Quantity</th>
                              <th>Price</th>
                              <th>Item Total Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in selectedParent.items">
                              <td>{{ item.item_id}}</td>
                              <td>{{ item.item_brand_name }}</td>
                              <td>{{ item.item_category_name }}</td>
                              <td>{{ item.item_qty }}</td>
                              <td>{{ item.item_price }}</td>
                              <td>{{ item.item_total_amt }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Modal for showing child items -->
<div class="modal fade" id="childModal" tabindex="-1" aria-labelledby="childModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" style="max-width: 75%;">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="childModalLabel">Order Items</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Table wrapped in a div with `table-responsive` class -->
                <div class="table-responsive">
                    <table class="table table-sm table-bordered">
                        <thead>
                            <tr>
                              <th>Child Item ID</th>
                              <th>Brand Name</th>
                              <th>Category Name</th>
                              <th>Quantity</th>
                              <th>Price</th>
                              <th>Item Total Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="item in selectedParent.items">
                              <td>{{ item.item_id}}</td>
                              <td>{{ item.item_brand_name }}</td>
                              <td>{{ item.item_category_name }}</td>
                              <td>{{ item.item_qty }}</td>
                              <td>{{ item.item_price }}</td>
                              <td>{{ item.item_total_amt }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>